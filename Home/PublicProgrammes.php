
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Programmes</title>
    <meta content="" name="description">
    <meta content="" name="keywords">
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">


    <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/css/card.css" rel="stylesheet">
    <link href="../assets/css/styles.css" rel="stylesheet">

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">


    <style>
        .card-grid {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background-color: #fff;
        }

        .banner-img {
            width: 100%;
            height: 60px;
            background-color: #ffffff;
            border-radius: 10px 10px 0 0;
        }

        .profile-img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 50%;
            margin-bottom: 15px;
        }

        .card-body {
            text-align: center;
        }

        .card-body .badge {
            margin-bottom: 10px;
            font-size: 14px;
        }

        .card-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .card-text {
            font-size: 14px;
            color: #555;
            margin-bottom: 15px;
        }

        .card-footer {
            margin-top: auto;
            padding-top: 10px;
            border-top: 1px solid #ddd;
        }

        .card-footer .view-more {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }

        .card-footer .view-more:hover {
            text-decoration: underline;
        }

        .btn-primary {
            color: #fff;
            background-color: #007bff;
            border-color: #007bff;
            padding: 5px 15px;
            font-size: 0.875rem;
            text-decoration: none;
        }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #004085;
        }

        .page-item.active .page-link {
            background: #052766 !important;
            border-color: #052766 !important;
        }
        .services .icon-box:hover::before {
            background: #052766 !important;
        }
        .services .icon i, .e-code, .page-link {
            color: #052766;
        }
        .back-to-top i {
            background: #052766;
        }

        button {
            background: #052766;
        }
        .client-text, .nav-menu a:hover {
            color: #052766 !important;
        }

            .section-title h2 {
            color: #9c6f1c;
            border-left: 5px solid #052766;
        }
         .section-title h2::before,
         .section-title h2::after {
	        background: #9c6f1c;
        }
        #createAccount:hover,
        #loginMain:hover,
        .back-to-top i:hover {
            box-shadow: 0 1rem 1rem rgba(0,0,0,.15);
            background: #052766 !important;
            color: #fff !important;
            transform: scale(1.025)
        }
        #hero .btn-get-started:hover {
            background: #052766;
            box-shadow: 0 1rem 1rem rgba(0,0,0,.15);
            transform: scale(1.025)
        }
        .active.hvr-underline-from-center > a {
            color: #052766 !important;
        }

        #hero .btn-get-started, #createAccountMain {
            color: #052766;
            border: 2px solid #052766;
        }

        #createAccountMain {
             background-color: #fff !important;
        }
        .back-to-top i, .back-to-top i:hover, .btn-primary, .hvr-underline-from-center:before, .client-bg, #createAccountMain:hover {
            background: #052766 !important;
        }

        #createAccountMain:hover {
            color: #fff !important;
        }
        .btn.btn-primary:hover {
            box-shadow: 0 1rem 1rem rgba(0,0,0,.15);
            height: 2px;
            transform: scale(1.025)
        }
        .btn-secondary, .btn-dark, .btn-info, .contact .php-email-form button[type="submit"] {
            background: #9c6f1c !important;
            border-color: #9c6f1c !important;
        }
            .btn.btn-info:hover,
            #sendMessage:hover,
            .btn-outline-success:hover,
            .btn-secondary:hover,
            .btn-dark:hover,
            .btn-info:hover {
                background: #9c6f1c !important;
                color: #fff !important;
                box-shadow: 0 1rem 1rem rgba(0,0,0,.15);
                transform: scale(1.025)
            }

    </style>
    <script>
    let primColor = "#052766";

        if (primColor)
        {
            document.documentElement.style.cssText = "--clr-primary: "+primColor;
        }
    </script>
</head>

<body>
    <input type="hidden" id="primary-color" value=#052766 />
    <input type="hidden" id="secondary-color" value=#9c6f1c />

    <header id="header" class="fixed-top d-flex align-items-center">
        <div class="container d-flex align-items-center">

            <div class="row col-lg-12 mb-5">
                <div class="col-lg-4">
                        <h2>
                            <a href="../index.html" class="text-dark font-weight-bold">
                                    <span>RefuSHE Kenya</span>
                            </a>
                        </h2>
                </div>
                <div class="col-lg-8">
                    <nav class="nav-menu d-none d-lg-block border-1 ms-auto">
                        <ul class="d-flex justify-content-end align-items-center">
                            <li class="hvr-underline-from-center active " id="home"><a href="PublicProgrammes.html">Find Courses</a></li>
                            <li class="get-started"><a id="createAccountMain" href="Register.html">Create Account</a></li>
                            <li class="get-started "><a id="loginMain" href="Login.html">Log In</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <main>
        
    <section>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-1"></div>
                <div class="col-md-10">
                    <div class="page-head">
                        <h4 class="mt-2 mb-2 client-text">Find All courses</h4>
                    </div>
                    <div class="p-1 bg-light rounded rounded-pill shadow-sm mb-4">
                        <form method="get">
                            <div class="input-group">
                                <input type="search" placeholder="What're you searching for?" aria-describedby="button-addon1" class="form-control border-0 bg-light" name="searchString" id="searchString">
                                <div class="input-group-append">
                                    <button id="button-addon1" type="submit" class="btn btn-link text-primary"><i class="fa fa-search"></i></button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="row">
                        <div class="row">
                            <?php include '../Backend/fetch_courses.php'; ?>
                        </div>
                    
                        <div class="col-md-12 d-flex justify-content-center mt-5">
                            <nav aria-label="Page navigation example">
                                <ul class="pagination" id="pagination">
                                    <!-- Pagination links will be dynamically inserted here -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <input hidden id="pageIndex" value="1" />
                </div>
                <div class="col-md-2"></div>
            </div>
        </div>
    </section>

<!-- Course Details Modal -->
    <div class="modal fade" id="courseModal" tabindex="-1" aria-labelledby="courseModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="courseModalLabel">Course Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body" id="modalCourseDetails">
                    <!-- Course details will be injected here -->
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="applyButton">Apply</button>
                    <input type="hidden" id="modalCourseId">
                </div>
            </div>
        </div>
    </div>

    <section id="contact" class="contact">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Contact Us</h2>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
                    <div class="contact-about">
                        <h3>RefuSHE Kenya</h3>
                        <p> Education For Empowerment </p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mt-4 mt-md-0" data-aos="fade-up" data-aos-delay="200">
                    <div class="info">
                        <div>
                        </div>
                        <div class="ml-2">
                        </div>
                        <div class="ml-3">
                        </div>
                        <div class="ml-4">
                            <i class="ri-mail-send-line"></i>
                            <p>Refushe.org</p>
                        </div>
                    </div>
                </div>

                <div class="col-lg-5 col-md-12" data-aos="fade-up" data-aos-delay="300">
                    <form method="post" id="enquiry" role="form" class="php-email-form" action="https://application.refushe.org/Enquiry/SaveEnquiry">
                        <div class="form-group">
                            <input type="text" name="Name" class="form-control" id="Name" placeholder="Your Name" data-rule="minlen:4" data-msg="Please enter at least 12 chars" />
                            <div class="validate"></div>
                        </div>
                        <div class="form-group">
                            <input type="email" class="form-control" name="Email" id="Email" placeholder="Your Email" data-rule="email" data-msg="Please enter a valid email" />
                            <div class="validate"></div>
                        </div>
                        <div class="form-group">
                            <input type="number" class="form-control" name="Phone" id="Phone" placeholder="Your Phone number" data-rule="minlen:10" data-msg="Please enter a valid phone" />
                            <div class="validate"></div>
                        </div>
                        <div class="form-group">
                            <textarea class="form-control" name="Message" id="Message" rows="5" data-rule="minlen:30" data-msg="Please write something for us not less than 30 chracters" placeholder="Message"></textarea>
                            <div class="validate"></div>
                        </div>
                        <div class="mb-3">
                            <div class="loading">Loading</div>
                            <div class="error-message"></div>
                            <div class="sent-message">Your message has been sent. Thank you!</div>
                        </div>
                        <div class="text-center"><button type="submit" id="sendMessage">Send Message</button></div>
                    <input name="__RequestVerificationToken" type="hidden" value="CfDJ8CDAy67nCthLtdW4kvview2r24ABn5Ga_3Tb6gtAuaFGGsTHsgA0hb_TSXwDjld0VKxnVhnUDVq84HecUMv-68YqJe0dKErVv40vzn-ouEFtkEghsqvIArkc_Jh9YYNV2yM1462fX4D9F84H2H65Gyc" /></form>
                </div>

            </div>

        </div>
    </section>
    </main>
    <a href="PublicProgrammes.html#" class="back-to-top"><i class="icofont-simple-up"></i></a>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll('.view-more').forEach(button => {
            button.addEventListener('click', function() {
                const courseId = this.dataset.courseId;

                document.getElementById('modalCourseId').value = courseId;
                
                fetch(`../Backend/fetch_courses.php?id=${courseId}&json=true`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.length > 0) {
                            const course = data[0];

                            document.getElementById('modalCourseDetails').innerHTML = `
                                <h5>${course.name}</h5>
                                <p>${course.description}</p>
                                <p>Duration: ${course.duration}</p>
                                <p>Certificate: ${course.certificate_type}</p>
                            `;

                            const courseModal = new bootstrap.Modal(document.getElementById('courseModal'));
                            courseModal.show();
                        } else {
                            alert('Course details not found.');
                        }
                    })
                    .catch(error => console.error('Error:', error));
            });
        });

        document.getElementById('applyButton').addEventListener('click', function() {
            const courseId = document.getElementById('modalCourseId').value;

            fetch('../Backend/check_login.php')
                .then(response => response.json())
                .then(data => {
                    if (data.logged_in) {
                        fetch('../Backend/apply_course.php', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ course_id: courseId })
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.success) {
                                alert('Successfully applied for the course!');
                                const courseModal = bootstrap.Modal.getInstance(document.getElementById('courseModal'));
                                courseModal.hide();
                            } else {
                                alert('Failed to apply for the course. Please try again.');
                            }
                        });
                    } else {
                        alert('You must be logged in to apply for a course.');
                    }
                });
        });
    });
    </script>

    <script>
    $(document).ready(function () {
    var opt = "";
		$("." + opt + "-link").addClass("bottom-links-active");
		var isOpen = false;
		$("#userButton").click(function () {
			isOpen = !isOpen;
			if (isOpen) {
				$("#userMenu").removeClass("hidden");
			}
			else
				$("#userMenu").addClass("hidden");
        });

        changeColor();

        $('.hvr-underline-from-center').on("click", function () {
            debugger
            $('.hvr-underline-from-center').removeClass('active');
            let activeLink = $(this).attr('id');
            $("#" + activeLink).addClass('active');
            sessionStorage.setItem("active-link", activeLink);
        })
        const activeLink = sessionStorage.getItem("active-link");
        if (activeLink) {
            $('.hvr-underline-from-center').removeClass('active');
            $("#" + activeLink).addClass('active');
        }
        window.onscroll = function () {
            if (activeLink) {
                $('.hvr-underline-from-center').removeClass('active');
                $("#" + activeLink).addClass('active');
            }
        }

        $("#sendMessage").on("click", () => {
            debugger
            if ($('#enquiry').valid()) {
                console.log("success!");
            }
            else {
                console.log("error!");
            }
        })
	});
    </script>

    <script>
          debugger
        let imageBanner = document.querySelectorAll(".banner-img");
        if (imageBanner) {
            imageBanner.forEach(f => {

                f.style.backgroundImage = "url(/uploads/9e60f5e1-32d8-4af8-9226-086eb7df8f39.png)";
            })
        }
        function changeColor() {
            var pcolor = $('#primary-color').val();
            var scolor = $('#secondary-color').val();


            $('.services .icon-box::before').css('background-color', pcolor);
            $('#loginMain').css('background-color', pcolor);
            $('#findCourses').css('color', pcolor);


            $('.btn-info').css('background-color', pcolor);
            $('.btn-success').css('background-color', scolor);
            $('.btn-dark').css('background-color', scolor);

            $('.icon-box:hover').css('background-color', pcolor);
            $('.badge-primary').css('background-color', pcolor);
            $('.ri-mail-send-line').css('color', pcolor);
            $('.ri-map-pin-line').css('color', pcolor);
            $('.text-inf').css('color', scolor);
        }


    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
            debugger
            let pageIndex = document.getElementById("pageIndex");
            let pageItem = document.querySelector(".page-item.active");
            if (pageItem) {
                pageItem.classList.remove("active");
            }
            let setActive = document.getElementById("data_"+pageIndex.value);
            if (setActive) {
                setActive.classList.add("active");
            }
    </script>
;

</body>
</html>